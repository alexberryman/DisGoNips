package main

import (
	turnips "DiscordGoTurnips/internal/turnips/generated-code"
	"fmt"
	"testing"
	"time"
)

func TestBuildPriceUriImage(t *testing.T) {
	p := []turnips.GetWeeksPriceHistoryByServerRow{{
		ID:          0,
		DiscordID:   "1",
		Price:       1,
		AmPm:        "am",
		DayOfWeek:   1,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       11,
		AmPm:        "pm",
		DayOfWeek:   1,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       2,
		AmPm:        "am",
		DayOfWeek:   2,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       22,
		AmPm:        "pm",
		DayOfWeek:   2,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       3,
		AmPm:        "am",
		DayOfWeek:   3,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       33,
		AmPm:        "pm",
		DayOfWeek:   3,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       4,
		AmPm:        "am",
		DayOfWeek:   4,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       44,
		AmPm:        "pm",
		DayOfWeek:   4,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       5,
		AmPm:        "am",
		DayOfWeek:   5,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       55,
		AmPm:        "pm",
		DayOfWeek:   5,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       6,
		AmPm:        "am",
		DayOfWeek:   6,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       66,
		AmPm:        "pm",
		DayOfWeek:   6,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}}
	a := buildPriceUri(p, AcTurnipsImageLink)
	e := "Turnips: https://ac-turnip.com/p--1-11-2-22-3-33-4-44-5-55-6-66.png\n"
	if a.Text != e {
		fmt.Println(fmt.Sprintf("%s%s", a.Text, e))
		t.Error("Things don't match")
	}
}
func TestBuildPriceUriLink(t *testing.T) {
	p := []turnips.GetWeeksPriceHistoryByServerRow{{
		ID:          0,
		DiscordID:   "1",
		Price:       1,
		AmPm:        "am",
		DayOfWeek:   1,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       11,
		AmPm:        "pm",
		DayOfWeek:   1,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       2,
		AmPm:        "am",
		DayOfWeek:   2,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       22,
		AmPm:        "pm",
		DayOfWeek:   2,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       3,
		AmPm:        "am",
		DayOfWeek:   3,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       33,
		AmPm:        "pm",
		DayOfWeek:   3,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       4,
		AmPm:        "am",
		DayOfWeek:   4,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       44,
		AmPm:        "pm",
		DayOfWeek:   4,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       5,
		AmPm:        "am",
		DayOfWeek:   5,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       55,
		AmPm:        "pm",
		DayOfWeek:   5,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       6,
		AmPm:        "am",
		DayOfWeek:   6,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}, {
		ID:          0,
		DiscordID:   "1",
		Price:       66,
		AmPm:        "pm",
		DayOfWeek:   6,
		DayOfYear:   1,
		Year:        2020,
		CreatedAt:   time.Time{},
		Week:        1,
		DiscordID_2: "1",
		ServerID:    "11",
		Nickname:    "Turnips",
	}}
	a := buildPriceUri(p, AcTurnipsChartLink)
	e := "Turnips: <https://ac-turnip.com/share?f=-1-11-2-22-3-33-4-44-5-55-6-66>\n"
	if a.Text != e {
		t.Error(fmt.Sprintf("Things don't match\nExpected:\n%sActual:\n%s", e, a.Text))
	}
}
